{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://openagents.org/schemas/oas-schema.json",
    "title": "Open Agent Spec",
    "description": "Schema for Open Agent Spec YAML files",
    "type": "object",
    "required": [
      "open_agent_spec",
      "agent",
      "intelligence",
      "tasks",
      "prompts"
    ],
    "properties": {
      "open_agent_spec": {
        "type": "string",
        "pattern": "^(1\\.(0\\.[4-9]|[1-9]\\.[0-9]+)|[2-9]\\.[0-9]+\\.[0-9]+)$",
        "description": "Version of the Open Agent Spec (minimum 1.0.4)"
      },
      "agent": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "role": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "role"
        ]
      },
      "intelligence": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "llm"
            ]
          },
          "engine": {
            "type": "string",
            "enum": [
              "openai"
            ]
          },
          "model": {
            "type": "string"
          }
        },
        "required": [
          "type",
          "engine",
          "model"
        ]
      },
      "tasks": {
        "type": "object",
        "patternProperties": {
          "^[a-zA-Z0-9_-]+$": {
            "type": "object",
            "properties": {
              "description": {
                "type": "string"
              },
              "input": {
                "type": "object",
                "properties": {
                  "properties": {
                    "type": "object"
                  }
                }
              },
              "output": {
                "type": "object",
                "properties": {
                  "properties": {
                    "type": "object"
                  }
                }
              }
            },
            "required": [
              "description",
              "output"
            ]
          }
        }
      },
      "prompts": {
        "type": "object",
        "properties": {
          "system": {
            "type": "string"
          },
          "user": {
            "type": "string"
          }
        },
        "required": [
          "system",
          "user"
        ]
      },
      "behavioural_contract": {
        "type": "object"
      },
      "interface": {
        "type": "object"
      }
    }
  }
